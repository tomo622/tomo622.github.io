---
title: "MySQL"
excerpt: "MySQL 기초를 정리한다."
categories:
 - database
last_modified_at: 2020-05-20T13:14:00
---

## 기본

### AS

```sql
-- SELEC 에서 재정의된 컬럼명은 바로 사용이 가능하다.
SELECT `column` AS `as_column` FROM `table` GROUP BY `as_column` HAVING `as_column` BETWEEN 0 AND 9
```

### IS NULL, IS NOT NULL

```sql
... WHERE `column` IS NOT NULL -- 해당 컬럼의 값이 null 이 아닌 레코드 조회
... WHERE `column` IS NULL -- 해당 컬럼의 값이 null 인 레코드 조회
```

### BETWEEN AND

```sql
... WHERE `column` BETWEEN 0 AND 9
```

### GROUP BY

[집계함수](#집계함수) 와 함께 자주 사용된다. 이때 **그룹화에 의한 중복 제거 상태가 아닌 레코드들에 대해** 집계함수를 적용한다.

```sql
-- 해당 컬럼에 대한 그룹을 만들고 중복된 레코드는 제거하여 보여준다.
GROUP BY `column`

-- 컬럼을 기준으로 묶인 각 그룹의 첫 번째 레코드만 조회된다.
SELECT * FROM `table` GROUP BY `column`

-- 컬럼을 기준으로 생성된 각 그룹 레코드 수를 조회한다.
SELECT `column`, COUNT(*) AS `count` FROM `table` GROUP BY `column`

-- WHERE 는 그룹화 전에 처리
SELECT * FROM `table` WHERE 조건문 GROUP BY `column`

-- HAVING 은 그룹화 후에 처리
SELECT * FROM `table` GROUP BY `column` HAVING 조건문

-- 그룹화 전 조건문1 처리, 그룹화 후 조건문2 처리
SELECT * FROM `table` WHERE 조건문1 GROUP BY `column` HAVING 조건문2

-- ORDER BY 는 마지막에
... GROUP BY `column` HAVING 조건문 ORDER BY `column`

```

### ORDER BY

```sql
ORDER BY `column` -- 오름차순 정렬 (기본값)
ORDER BY `column` DESC 	-- 내림차순 정렬
```

```sql
-- column01 기준으로 우선 정렬, column01 이 같을 경우 column02 기준으로 정렬
ORDER BY `column01`, `column02`

-- column02 기준으로 정렬할 경우에만 내림차순 정렬
ORDER BY `column01`, `column02` DESC

-- column01 기준으로 정렬할 경우에만 내림차순 정렬
ORDER BY `column01` DESC, `column02`
```

### LIMIT

```sql
LIMIT n -- 상위 n개 반환
```

### SET

```sql
SET @var := -1; -- 변수 설정

-- 변수를 활용하여 0~10 출력하기
SET @var := -1;
SELECT 
	(@var:=@var+1) AS `VAR`
FROM 
	`table`
WHERE 
	@var < 10
	
-- 변수를 활용하여 더미 데이터 출력하기
SET @var := -1;
SELECT
	(@var:=@var+1) AS `VAR`
	(SELECT COUNT(*) AS `count` FROM `table` WHERE `column` = @var) AS `COUNT`
FROM
	`table`
WHERE
	@var < 10
```

## 연산자

```sql
-- 비교연산자
`column1` = `column2` -- 같다.
`column1` != `column2` -- 같지 않다.
`column1` <> `column2` -- 같지 않다.

-- 대입연산자
SET @var := 초기값 -- var 변수에 초기값 설정
```

## 함수

### 논리 함수 : IF, IFNULL

```sql
IF(논리식, 참인 경우 값, 거짓인 경우 값)
IFNULL(`column`, 대체 값)
```

### 집계 함수 :  COUNT, SUM, AVG, MIN, MAX

NULL 은 제외하고 처리된다.

```sql
COUNT(*) -- 레코드 수를 반환
COUNT(`column`) -- 해당 컬럼의 레코드 수를 반환, NULL 은 제외된다.
COUNT(DISTINCT `column`) -- 해당 컬럼의 중복 제거된 레코드 수를 반환

SUM(`column`)
AVG(`column`)
MIN(`column`)
MAX(`column`)
```

### 날짜 추출 함수 : YEAR, MONTH, DAY, HOUR, MINUTE, SECOND

```sql
YEAR('2020-05-21 01:23:00') -- 연도 추출
MONTH('2020-05-21 01:23:00') -- 달 추출
DAY('2020-05-21 01:23:00') -- 일 추출
HOUR('2020-05-21 01:23:00') -- 시간 추출
MINUTE('2020-05-21 01:23:00') -- 분 추출
SECOND('2020-05-21 01:23:00') -- 초 추출
```

